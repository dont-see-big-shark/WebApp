function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire951b,r=t.register;r("aYbtt",function(r,n){let a,i,o,l,s,c,u,d,f,h,m;Object.defineProperty(r.exports,"__esModule",{value:!0,configurable:!0}),e(r.exports,"default",function(){return A});var p,b,y,g,v=t("9tSOk"),w=t("5FgjZ"),x=t("3BsvJ"),T=t("iJe7H"),j=t("40kHK"),F=t("8myCc"),S=t("kSJPV"),O=t("9TAIy"),H=function(e,t,r,n,a,i){function o(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var l,s=n.kind,c="getter"===s?"get":"setter"===s?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f=!1,h=r.length-1;h>=0;h--){var m={};for(var p in n)m[p]="access"===p?{}:n[p];for(var p in n.access)m.access[p]=n.access[p];m.addInitializer=function(e){if(f)throw TypeError("Cannot add initializers after decoration has completed");i.push(o(e||null))};var b=(0,r[h])("accessor"===s?{get:d.get,set:d.set}:d[c],m);if("accessor"===s){if(void 0===b)continue;if(null===b||"object"!=typeof b)throw TypeError("Object expected");(l=o(b.get))&&(d.get=l),(l=o(b.set))&&(d.set=l),(l=o(b.init))&&a.unshift(l)}else(l=o(b))&&("field"===s?a.unshift(l):d[c]=l)}u&&Object.defineProperty(u,n.name,d),f=!0},E=function(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0},C=function(e,t,r,n){return new(r||(r=Promise))(function(a,i){function o(e){try{s(n.next(e))}catch(e){i(e)}}function l(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,l)}s((n=n.apply(e,t||[])).next())})},I=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},k=function(e,t,r,n,a){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},P=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r},A=(s=[(0,w.component)({tagName:"clinic-edit"}),w.observer],c=[],u=HTMLElement,d=[],f=[],h=[],m=[],i=class extends u{constructor(){super(...arguments),p.set(this,E(this,d,"")),b.set(this,(E(this,f),E(this,h,{name:"",url:"",startTime:"09:00",endTime:"18:00",contacts:[{name:"",phone:""}],remark:""}))),Object.defineProperty(this,"changeText",{enumerable:!0,configurable:!0,writable:!0,value:(E(this,m),({target:e})=>{let{name:t,value:r}=e;this.state=Object.assign(Object.assign({},this.state),{[t]:r})})}),Object.defineProperty(this,"handleSubmit",{enumerable:!0,configurable:!0,writable:!0,value:e=>C(this,void 0,void 0,function*(){e.preventDefault();let t=this.state,{contacts:r}=t,n=P(t,["contacts"]);yield(0,j.clinic).updateOne(Object.assign(Object.assign({},n),{contacts:r.filter(({name:e,phone:t})=>(null==e?void 0:e.trim())&&(null==t?void 0:t.trim()))}),this.dataId),self.alert("提交成功，工作人员审核后即可查看"),location.hash=F.RouteRoot.Clinic})})}get dataId(){return I(this,p,"f")}set dataId(e){k(this,p,e,"f")}get state(){return I(this,b,"f")}set state(e){k(this,b,e,"f")}mountedCallback(){return C(this,void 0,void 0,function*(){if(!this.dataId)return;let{name:e,url:t,contacts:r,startTime:n,endTime:a,remark:i}=yield(0,j.clinic).getOne(this.dataId);this.state={name:e,url:t,contacts:r,startTime:n,endTime:a,remark:i}})}render(){let{dataId:e}=this,{name:t,url:r,startTime:n,endTime:a,contacts:i,remark:o}=this.state;return(0,v.jsxs)(O.SessionBox,{children:[(0,v.jsxs)("h2",{children:["义诊服务",e?"发布":"修改"]}),(0,v.jsxs)("form",{onChange:this.changeText,onSubmit:this.handleSubmit,children:[(0,v.jsx)(T.FormField,{name:"name",required:!0,defaultValue:t,label:"机构/个人名"}),(0,v.jsx)(T.FormField,{type:"url",name:"url",required:!0,defaultValue:r,label:"官方网址",placeholder:"官网 或 信息来源"}),(0,v.jsxs)(T.FormGroup,{children:[(0,v.jsx)(T.FormLabel,{children:"每日接诊起止时间"}),(0,v.jsxs)(T.InputGroup,{children:[(0,v.jsx)(T.FormControl,{type:"time",name:"startTime",required:!0,defaultValue:n,placeholder:"开始"}),(0,v.jsx)(T.FormControl,{type:"time",name:"endTime",required:!0,defaultValue:a,placeholder:"结束"})]})]}),(0,v.jsx)(S.ContactField,{list:i,onChange:({detail:e})=>this.state.contacts=e}),(0,v.jsx)(T.FormField,{as:"textarea",name:"remark",defaultValue:o,label:"备注"}),(0,v.jsxs)(T.FormGroup,{className:"mt-3 d-flex flex-column flex-sm-row",children:[(0,v.jsx)(T.Button,{type:"submit",variant:"primary",disabled:j.clinic.uploading>0,children:"提交"}),(0,v.jsx)(T.Button,{type:"reset",variant:"danger",onClick:()=>location.hash=F.RouteRoot.Clinic,children:"取消"})]})]})]})}},p=new WeakMap,b=new WeakMap,y=i,"symbol"==typeof(g="ClinicEdit")&&(g=g.description?"[".concat(g.description,"]"):""),Object.defineProperty(y,"name",{configurable:!0,value:g}),(()=>{var e;let t="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(e=u[Symbol.metadata])&&void 0!==e?e:null):void 0;o=[w.attribute,x.observable],l=[x.observable],H(i,null,o,{kind:"accessor",name:"dataId",static:!1,private:!1,access:{has:e=>"dataId"in e,get:e=>e.dataId,set:(e,t)=>{e.dataId=t}},metadata:t},d,f),H(i,null,l,{kind:"accessor",name:"state",static:!1,private:!1,access:{has:e=>"state"in e,get:e=>e.state,set:(e,t)=>{e.state=t}},metadata:t},h,m),H(null,a={value:i},s,{kind:"class",name:i.name,metadata:t},null,c),i=a.value,t&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:t}),E(i,c)})(),i)}),r("8myCc",function(t,r){e(t.exports,"RouteRoot",function(){return a}),e(t.exports,"default",function(){return i}),(n=a||(a={})).Hospital="hospital",n.Logistics="logistics",n.Hotel="hotel",n.Factory="factory",n.Donation="donation",n.Clinic="clinic",n.Maps="maps",n.Admin="admin",n.Community="community";var n,a,i=[{title:"首页",href:""},{title:"医院",href:a.Hospital,icon:"hospital"},{title:"物流",href:a.Logistics,icon:"truck"},{title:"酒店",href:a.Hotel,icon:"building-check"},{title:"生产",href:a.Factory,icon:"buildings"},{title:"捐赠",href:a.Donation,icon:"heart"},{title:"义诊",href:a.Clinic,icon:"house-heart"},{title:"疫情地图",href:a.Maps,icon:"map"},{title:"红会监工",href:"https://weileizeng.github.io/red-cross/",icon:"plus-square"},{title:"开放社区",href:a.Community}]}),r("i2xD3",function(r,n){e(r.exports,"errors",function(){return a}),e(r.exports,"config",function(){return i}),e(r.exports,"fromDataTransfer",function(){return o}),e(r.exports,"getDirHandlesFromInput",function(){return l}),e(r.exports,"getFileHandlesFromInput",function(){return s});let a={INVALID:["seeking position failed.","InvalidStateError"],GONE:["A requested file or directory could not be found at the time an operation was processed.","NotFoundError"],MISMATCH:["The path supplied exists, but was not an entry of requested type.","TypeMismatchError"],MOD_ERR:["The object can not be modified in this way.","InvalidModificationError"],SYNTAX:e=>[`Failed to execute 'write' on 'UnderlyingSinkBase': Invalid params passed. ${e}`,"SyntaxError"],SECURITY:["It was determined that certain files are unsafe for access within a Web application, or that too many calls are being made on file resources.","SecurityError"],DISALLOWED:["The request is not allowed by the user agent or the platform in the current context.","NotAllowedError"]},i={writable:globalThis.WritableStream};async function o(e){console.warn("deprecated fromDataTransfer - use `dt.items[0].getAsFileSystemHandle()` instead");let[r,n,a]=await Promise.all([t("5ib5H"),t("hucLs"),t("15CKn")]),i=new r.FolderHandle("",!1);return i._entries=e.map(e=>e.isFile?new n.FileHandle(e,!1):new n.FolderHandle(e,!1)),new a.FileSystemDirectoryHandle(i)}async function l(e){let{FolderHandle:r,FileHandle:n}=await t("5ib5H"),{FileSystemDirectoryHandle:a}=await t("15CKn"),i=Array.from(e.files),o=new r(i[0].webkitRelativePath.split("/",1)[0],!1);return i.forEach(e=>{let t=e.webkitRelativePath.split("/");t.shift();let a=t.pop();t.reduce((e,t)=>(e._entries[t]||(e._entries[t]=new r(t,!1)),e._entries[t]),o)._entries[a]=new n(e.name,e,!1)}),new a(o)}async function s(e){let{FileHandle:r}=await t("5ib5H"),{FileSystemFileHandle:n}=await t("erf0e");return Array.from(e.files).map(e=>new n(new r(e.name,e,!1)))}}),r("5ib5H",function(e,r){var n=t("hArVH");e.exports=n("5tuHl").then(()=>t("dtpmZ"))}),r("hArVH",function(e,r){e.exports=function(e){return import(t("hx2cN").resolve(e))}}),r("hx2cN",function(t,r){e(t.exports,"register",function(){return n},function(e){return n=e}),e(t.exports,"resolve",function(){return a},function(e){return a=e});var n,a,i=new Map;n=function(e,t){for(var r=0;r<t.length-1;r+=2)i.set(t[r],{baseUrl:e,path:t[r+1]})},a=function(e){var t=i.get(e);if(null==t)throw Error("Could not resolve bundle with id "+e);return new URL(t.path,t.baseUrl).toString()}}),r("hucLs",function(e,r){var n=t("hArVH");e.exports=n("d0xkQ").then(()=>t("d1xSi"))}),r("15CKn",function(e,r){var n=t("hArVH");e.exports=n("e8ZAS").then(()=>t("9eWHj"))}),r("erf0e",function(e,r){var n=t("hArVH");e.exports=n("8dN6x").then(()=>t("kcPVa"))}),r("7fsxx",function(t,r){e(t.exports,"default",function(){return n});var n={ReadableStream:globalThis.ReadableStream,WritableStream:globalThis.WritableStream,TransformStream:globalThis.TransformStream,DOMException:globalThis.DOMException,Blob:globalThis.Blob,File:globalThis.File}});